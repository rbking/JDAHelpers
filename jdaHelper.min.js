!function(){"use strict";function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function checkForms(){frms.some(function(index,frm){var form=frms[frm];void 0!==form.formObj&&form.helperFn(form.formObj,inputs)})}function setTrailers(jsonObj){inputs.trailers=jsonObj}function validateRDC(rdc){for(var rdcs=[955,960,961,962,964,965,966,970,975,989,990,992,1413,1419,1420,1421,1424,1425,1426,1427,1429,1430,1431,1432,1436,1437,1438,1439,1440,1443,1447,1449,1450,1451,1453,1457,1463,1464,1466,1471,1472,1473,1477,3106,3110,3111,3112,3257,3258,3262,3264,3266,3270,3282,3287,3288,3289,3290,3291,3304,3312,3336,3701,3703];-1===rdcs.indexOf(rdc);)if(rdc=parseInt(prompt("Enter your RDC")),isNaN(rdc))return{status:!1};return inputs.user.rdc=rdc,{status:!0,value:rdc}}function validateInitials(ini){for(;3!==ini.length;)if(null===(ini=prompt("Enter your 3 initials").toUpperCase()))return{status:!1};return inputs.user.initials=ini,{status:!0,value:ini}}function integrateFormAssist(frm,inputs){jQuery(frm).append('        \n        <table border="0" cellspacing="0" cellpadding="1">\n            <tbody>\n                <tr>\n                    <td nowrap="yes">\n                        <h2><u>QuickLinks</u>:</h2>\n                    </td>\n                    <td nowrap="yes">\n                        <table id="buttonID0" border="1" cellspacing="0" cellpadding="0" class="buttonBorder">\n                            <tbody>\n                                <tr>\n                                    <td id="buttonRegular" nowrap="yes" class="buttonText">\n                                        <a href="javascript:submitMenu(\'UPLOAD_FILE_\',false, document.IntegrationRequestListForm);" \n                                        tabindex="39" \n                                        onmouseover="i2uiSetMenuCoords (this,event)">&nbsp;&nbsp;Upload File&nbsp;&nbsp;\n                                        </a>\n                                    </td>                                                                                                                        \n                                </tr>\n                            </tbody>\n                        </table>\n                    </td>                    \n                </tr>\n            </tbody>\n        </table>  \n    ')}function integrateUpFormAssist(frm,inputs){frm.uploadLocation_options.value="UPLOAD_XL_XML_"}function loadFormAssist(frm,inputs){jQuery(frm).append('        \n        <table border="0" cellspacing="0" cellpadding="1">\n            <tbody>\n                <tr>\n                    <td nowrap="yes">\n                        <h2><u>QuickLinks</u>:</h2>\n                    </td>\n                    <td nowrap="yes">\n                        <table id="buttonID0" border="1" cellspacing="0" cellpadding="0" class="buttonBorder">\n                            <tbody>\n                                <tr>\n                                    <td id="buttonRegular" nowrap="yes" class="buttonText">\n                                        <a href="javascript:if(validRowsSelected(document.LoadList,\'ONEPLUS\',\'2\', tbo)) submitMenu(\'CONFIRMATION_REVERSAL_\',false, document.LoadList);" \n                                        tabindex="39" \n                                        onmouseover="i2uiSetMenuCoords (this,event)">&nbsp;&nbsp;Confirmation Reversal&nbsp;&nbsp;\n                                        </a>\n                                    </td>                                                                                                                        \n                                </tr>\n                            </tbody>\n                        </table>\n                    </td>\n                    <td nowrap="yes">\n                        <table id="buttonID0" border="1" cellspacing="0" cellpadding="0" class="buttonBorder">\n                            <tbody>\n                                <tr>\n                                    <td id="buttonRegular" nowrap="yes" class="buttonText">\n                                        <a href="javascript:if(validRowsSelected(document.LoadList,\'ONEPLUS\',\'2\', tbo)) submitMenu(\'VEHICLE_INFORMATION_\',false, document.LoadList);" \n                                        tabindex="39" \n                                        onmouseover="i2uiSetMenuCoords (this,event)">&nbsp;&nbsp;Vehicle Information&nbsp;&nbsp;\n                                        </a>\n                                    </td>                                                                                                                        \n                                </tr>\n                            </tbody>\n                        </table>\n                    </td>                             \n                </tr>\n            </tbody>\n        </table>\n  \n    ')}function loadListFormAssist(frm,inputs){jQuery(frm).append('        \n        <table border="0" cellspacing="0" cellpadding="1">\n            <tbody>\n                <tr>\n                    <td nowrap="yes">\n                        <h2><u>QuickLinks</u>:</h2>\n                    </td>\n                    <td nowrap="yes">\n                        <table id="buttonID0" border="1" cellspacing="0" cellpadding="0" class="buttonBorder">\n                            <tbody>\n                                <tr>\n                                    <td id="buttonRegular" nowrap="yes" class="buttonText">\n                                        <a href="javascript:if(validRowsSelected(document.LoadListForm,\'ONEPLUS\',\'2\', tbo)) submitMenu(\'RETURN_TO_IN_TRANSIT_\',false, document.LoadListForm);" \n                                        tabindex="39" \n                                        onmouseover="i2uiSetMenuCoords (this,event)">&nbsp;&nbsp;Return to In Transit&nbsp;&nbsp;\n                                        </a>\n                                    </td>                                                                                                                        \n                                </tr>\n                            </tbody>\n                        </table>\n                    </td>                    \n                </tr>\n            </tbody>\n        </table>  \n    ')}function memoFormAssist(frm,inputs){var npText=jQuery('textarea[name="nonPrintableText"]'),prText=jQuery('textarea[name="printableText"]');npText.length>0&&(npText.val()||npText.text("Inbound PO Trailer Detention"),prText.val()||prText.text(npText.text()))}function rateFormAssist(frm,inputs){var user=inputs.user;!function(){[{name:"rateCalculatorMode_options",value:"AP_ONLY"},{name:"ratingUnitsPieces",value:1},{name:"ratingUnitsPallets",value:1},{name:"ratingUnitsWeight",value:5e3},{name:"origLocType_options",value:"HUB"},{name:"origLocID",value:"L"+user.rdc},{name:"destLocType_options",value:"DC"}].forEach(function(item,index){var e=frm[item.name];e.value=item.value,e.style.backgroundColor="yellow"})}()}function stopConfirmationFormAssist(frm,inputs){frm.mbol.value=jQuery(jQuery(".containerBody td")[1]).html()}function stopFormAssist(frm,inputs){jQuery(frm).append('\n        <table border="0" cellspacing="0" cellpadding="1">\n            <tbody>\n                <tr>\n                    <td nowrap="yes">\n                        <table id="buttonID0" border="1" cellspacing="0" cellpadding="0" class="buttonBorder">\n                            <tbody>\n                                <tr>\n                                    <td id="buttonRegular" nowrap="yes" class="buttonText">\n                                        <a href="javascript: onSelectMatchingStops(\'1\');" \n                                        tabindex="39" \n                                        onmouseover="i2uiSetMenuCoords (this,event)">&nbsp;&nbsp;Select All Stop 1s&nbsp;&nbsp;\n                                        </a>\n                                    </td>                                                                                                                        \n                                </tr>\n                            </tbody>\n                        </table>\n                    </td>\n                    <td nowrap="yes">\n                        <table id="buttonID0" border="1" cellspacing="0" cellpadding="0" class="buttonBorder">\n                            <tbody>\n                                <tr>\n                                    <td id="buttonRegular" nowrap="yes" class="buttonText">\n                                        <a href="javascript: onSelectMatchingStops(\'2\');" \n                                        tabindex="39" \n                                        onmouseover="i2uiSetMenuCoords (this,event)">&nbsp;&nbsp;Select All Stop 2s&nbsp;&nbsp;\n                                        </a>\n                                    </td>                                                                                                                        \n                                </tr>\n                            </tbody>\n                        </table>\n                    </td>\n\n                    <script>\n                        function onSelectMatchingStops(vals) {\n                                jQuery(\'td[title="Stop Number"]\').each((index, stop) => {\n                                jQuery(\'input[name="RowKey"]\',stop.parentElement).prop("checked", stop.innerHTML === vals);                                                                     \n                                });                                                                                                                                                                                                  \n                        }\n                    <\/script>\n\n                </tr>\n            </tbody>\n        </table>\n  \n    ')}function vehicleFormAssist(frm,inputs){var trls=inputs.trailers;if(trls.length>0){frm.trailerNumber.value=function(PO){for(var i=0;i<trls.length;i++)if(trls[i].BOL===""+PO)return trls[i].TrailerNum}(""+jQuery(jQuery(".containerBody td")[1]).html())}}function voucherFormAssist(frm,inputs){function addModal(){jQuery("head").append("\n            <style>\n                label, input { display:block; }\n                input.text { margin-bottom:12px; width: 90%; padding: .4em; }\n                select { margin-bottom:12px; width: 95%; padding: .4em; }\n                fieldset { padding:0; border:0; margin-top:25px; }\n                .ui-dialog .ui-state-error { padding: .3em; }\n            </style>\n        "),jQuery("body").prepend('\n            <button id="openModal">Open Modal</button>\n            <div id="dialog-form" title="Miscellaneous Freight Charges">          \n                <form id="mfcForm">\n                    <fieldset>\n                        \x3c!-- Choose Carrier --\x3e\n                        <label for="mfcCarrier">Select Carrier</label>\n                        <select id="mfcCarrier" \n                                name="mfcCarrier" \n                                class="select ui-widget-content ui-corner-all">\n                        </select>\n\n                        \x3c!-- Choose MFC Type --\x3e\n                        <label for="mfcType">MFC Type</label>\n                        <select id="mfcType" \n                                name="mfcType" \n                                onChange="onMFCTypeChange(this.options[this.selectedIndex])"\n                                class="text ui-widget-content ui-corner-all">\n                        </select>\n                        \n                        \x3c!-- Enter Charge Amount --\x3e\n                        <label class="h4">MFC Charge Amount</label>\n                        <span style="float:left;margin-top:6px">$</span>\n                        <input type="text" \n                               id="mfcAmount" \n                               name="mfcAmount" \n                               value=50\n                               class="text ui-widget-content ui-corner-all">                                    \n\n                        <div class="mfc-ops">\n                            \x3c!-- Choose Type of Location to Charge --\x3e\n                            <label for="mfcOrigLocType">Location Type</label>\n                            <select id="mfcOrigLocType" \n                                    name="mfcOrigLocType"\n                                    class="text ui-widget-content ui-corner-all">\n                                <option value="HUB">RDC</option>\n                                <option value="DC">Store</option>                                    \n                            </select>\n                            \n                            \x3c!-- Enter Store to Charge To --\x3e\n                            <label for="mfcStore">Charge Location</label>\n                            <input type="text" \n                                   id="mfcStore" \n                                   name="mfcStore" \n                                   value="L'+user.rdc+"\"\n                                   class=\"text ui-widget-content ui-corner-all\">\n                        </div>\n\n                        \x3c!-- Hidden Fields --\x3e \n                        <div>\n                            <input type=\"hidden\" \n                                   id=\"mfcChargeCode\" \n                                   name=\"mfcChargeCode\" \n                                   value=\"DETFR\"/>\n                            <input type=\"hidden\" \n                                   id=\"mfcReasonCode\" \n                                   name=\"mfcReasonCode\" \n                                   value=\"INBO_NO_EST\"/>\n                            <input type=\"hidden\" \n                                   id=\"mfcProfitCenter\" \n                                   name=\"mfcProfitCenter\" \n                                   value=\"451000\" />                                                                     \n                        </div>\n\n                        \x3c!-- Allow form submission with keyboard without duplicating the dialog button --\x3e\n                        <input type=\"submit\" tabindex=\"-1\" style=\"position:absolute; top:-1000px\">\n                    </fieldset>\n                </form>\n            </div>\n            <script>\n                let dialog, \n                    form;   \n                \n                function onMFCTypeChange(value) {                \n                    let type = value.dataset;\n                    \n                    /* Hide Certain Controls if not needed */\n                    if(type.hide==='true') { \n                        jQuery('.mfc-ops').addClass(\"ui-helper-hidden\");\n                    } else {\n                        jQuery('.mfc-ops').removeClass(\"ui-helper-hidden\");\n                    };\n\n                    /* Populate Controls with values */\n                    JSON.parse(type.mfc).forEach((control) => {\n                        jQuery('#'+control.name).val(control.value);\n                    })\n                };\n\n                jQuery( \"#openModal\" ).button().on( \"click\", function() {\n                    dialog.dialog( \"open\" );\n                });         \n                \n                dialog = jQuery( \"#dialog-form\" ).dialog({\n                    autoOpen: true,\n                    height: 500,\n                    width: 350,\n                    modal: true,\n                    buttons: {\n                        \"Fill Out MFC\": onSubmitMFC,\n                        Close: function() {\n                            dialog.dialog( \"close\" );\n                        }\n                    },\n                    close: function() {\n                        form[0].reset();                        \n                    }\n                });\n            \n                form = dialog.find( \"form\" ).on( \"submit\", function( event ) {\n                    event.preventDefault();\n                    onSubmitMFC();;\n                });           \n                \n                function onSubmitMFC() {\n                   let data = {};\n                   // Capture all the data\n                   data.mfcCarrierName = jQuery('#mfcCarrier option:selected').text();\n                   jQuery('#mfcForm :input')\n                        .serializeArray()\n                        .forEach((input) => {\n                            data[input.name] = input.value\n                        });\n                    fillInDefaults(data);\n                };\n\n                function fillInDefaults(data) {\n                    /*Set Default Values Based on Inputs*/\n                    let mfcDefaultValues = [\n\n                        /*VOUCHER SECTION*/\n                        { name: 'carrCode',         value: data.mfcCarrierName                  },\n                        { name: 'tariffNumber',     value: data.mfcCarrier,     colorBg: true   },\n                        { name: 'custCode',         value: 'LOW'                                },\n                        { name: 'service',          value: 'TL_VAN'                             },\n                        { name: 'logisticsGroup',   value: 'LOW2'                               },\n                        { name: 'refNumber',        value: formatVoucher()                      },\n\n                        /*ADJUSTMENT SECTION*/\n                        { name: 'level_options',        value: 'OPTION'                             },\n                        { name: 'chargeCode',           value: data.mfcChargeCode,  colorBg: true   },\n                        { name: 'reasonCode_options',   value: data.mfcReasonCode,  colorBg: true   },\n                        { name: 'chargedAmount',        value: data.mfcAmount,      colorBg: true   },\n\n                        /*VOUCHER DETAILS SECTION*/\n                        { name: 'shipmentType',         value: 'NR'                                 },\n                        { name: 'profitCenter_options', value: data.mfcProfitCenter, colorBg: true  },\n                        { name: 'voucherType_options',  value: 'MFC'                                },\n                        { name: 'costCenter_options',   value: 'DOMESTIC'                           },\n\n                        /*ORIGIN/DESTINATION SECTION*/\n                        { name: 'origLocType',  value: data.mfcOrigLocType, colorBg: true },\n                        { name: 'origLocID',    value: data.mfcStore,       colorBg: true },\n                        { name: 'destLocType',  value: 'HUB',               colorBg: true },\n                        { name: 'destLocID',    value: \"L"+user.rdc+"\",      colorBg: true }  \n                    ];\n\n                    /*LOOP THROUGH FIELDS AND ADD VALUES AND COLOR*/\n                    mfcDefaultValues.forEach((item, index) => {\n                        let frm = document.ApMiscVoucherForm,\n                            e   = frm[item.name];\n                        e.value = item.value;\n                        if (item.colorBg === true) e.style.backgroundColor = 'yellow';\n                    });\n\n                    /*FORMAT UNIQUE VOUCHER NAME*/\n                    function formatVoucher() {\n                        return 'MFC'+modDate()+'"+user.initials+"';\n                    };\n\n                    /*FORMAT DATE INTO YYYYMMDDHHmm*/\n                    function modDate() {\n                        let dt      = new Date(),\n                            year    = dt.getFullYear(),\n                            month   = addLeadingZeros(dt.getMonth() + 1),\n                            day     = addLeadingZeros(dt.getDate()),\n                            hour    = addLeadingZeros(dt.getHours()),\n                            min     = addLeadingZeros(dt.getMinutes());\n\n                        return year+month+day+hour+min;\n\n                        function addLeadingZeros(data) {\n                            return String('00'+data).slice(-2);\n                        };\n                    };\n                };\n\n            <\/script>\n\n        ")}var _carrTrf,user=inputs.user,carrTrf=(_carrTrf={AISB:"2422",BNRP:"1959",CDNK:"1961",CCNI:"1676",CRCR:"1981",DART:"1983",DDIV:"1685",EPES:"1985",EPML:"1932",FCLC:"1712",FIXR:"1714",GPTD:"1917",HABC:"1725",HJBT:"1992",HUBG:"1994",MLXP:"2001",PGLI:"1936",PSKL:"2264",PTAG:"1938",QPMT:"1939",ROED:"2284",ROEV:"1943",SCNN:"1945",SNCK:"1964",SUSE:"2007",USXI:"1950",WENP:"1952",WSXI:"1955"},_defineProperty(_carrTrf,"WSXI","1955"),_defineProperty(_carrTrf,"KNIG","1998"),_carrTrf),mfcType=[{name:"Trailer Detention",hide:!0,optValue:[{CC:"DETFR",RC:"INBO_NO_EST",PC:"451000",ST:"L"+user.rdc,OT:"HUB"}]},{name:"Redelivery",hide:!1,optValue:[{CC:"DEPFR",RC:"OBOUND_NO_ES",PC:"862500",ST:"L",OT:"DC"}]},{name:"Trailer Repair",hide:!0,optValue:[{CC:"DCEFR",RC:"VEH_REPAIRS",PC:"891750",ST:"L"+user.rdc,OT:"DC"}]},{name:"Tolls",hide:!0,optValue:[{CC:"BRDFR",RC:"OBOUND_NO_ES",PC:"891305",ST:"L"+user.rdc,OT:"DC"}]},{name:"Trailer Rental",hide:!0,optValue:[{CC:"TRCFR",RC:"OBOUND_NO_ES",PC:"891305",ST:"L"+user.rdc,OT:"DC"}]},{name:"CNG (Fuel)",hide:!0,optValue:[{CC:"DFPFR",RC:"OBOUND_NO_ES",PC:"891305",ST:"L"+user.rdc,OT:"DC"}]}];!function(){addModal(),function(){var sRwSrc="";Object.keys(carrTrf).sort().forEach(function(car){sRwSrc+='<option value = "'+carrTrf[car]+'">'+car.toUpperCase()+"</option>"}),jQuery("#mfcCarrier").append(sRwSrc)}(),function(){var sRwSrc="";mfcType.forEach(function(type,index){var vals=type.optValue[0],mapper=[{name:"mfcChargeCode",value:vals.CC},{name:"mfcReasonCode",value:vals.RC},{name:"mfcProfitCenter",value:vals.PC},{name:"mfcStore",value:vals.ST},{name:"mfcOrigLocType",value:vals.OT}];sRwSrc+="<option data-mfc="+JSON.stringify(mapper)+" \n                                   data-hide="+type.hide+" \n                                   value="+index+">"+type.name+"\n                            </option>"}),jQuery("#mfcType").append(sRwSrc).val(0).change()}()}()}function voucherListAssist(frm,inputs){var msg=jQuery("#tmMessageLink").text();if(msg.length>0){var i=msg.lastIndexOf("Voucher")+"Voucher".length,j=msg.lastIndexOf(" ");msg=msg.slice(i,j),msg.length>0&&(isNaN(msg)||jQuery("input[value*="+msg+"]").trigger("click"))}}var doc=window.document,JDAhelpers={checkForms:checkForms,validateRDC:validateRDC,validateInitials:validateInitials,setTrailers:setTrailers},inputs={user:{},trailers:{}},frms=[{formObj:doc.ApMiscVoucherForm,helperFn:voucherFormAssist},{formObj:doc.APVoucherListForm,helperFn:voucherListAssist},{formObj:doc.MemoForm,helperFn:memoFormAssist},{formObj:doc.RateCalcMainForm,helperFn:rateFormAssist},{formObj:doc.StopConfirmationForm,helperFn:stopConfirmationFormAssist},{formObj:doc.LoadVehicleInfoForm,helperFn:vehicleFormAssist},{formObj:doc.LoadList,helperFn:loadFormAssist},{formObj:doc.LoadListForm,helperFn:loadListFormAssist},{formObj:doc.StopListForm,helperFn:stopFormAssist},{formObj:doc.IntegrationRequestListForm,helperFn:integrateFormAssist},{formObj:doc.IntegrationRequestUploadForm,helperFn:integrateUpFormAssist}];window.JDAhelpers=JDAhelpers}();